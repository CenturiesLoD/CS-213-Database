<!DOCTYPE html>
<html>
<header>
    <h1>Air Reservation System</h1>
    <nav>
        <a href="/">Home</a>

        <!-- Global search bar: sends query to public.search -->
        <form action="{{ url_for('public.public_search_upcoming') }}" method="GET" style="display:inline-block; margin-left:1rem;">
            <!-- <input type="text" name="q" placeholder="Search flights"> -->
            <button type="submit">
                <!-- Unique search button that shows what's for what -->
                {% if session.get('user_type') == 'customer' %}
                Search Upcoming Flights (Customer)
                {% elif session.get('user_type') == 'agent' %}
                Search Upcoming Flights (Agent)
                {% elif session.get('user_type') == 'staff' %}
                Search Upcoming Flights (Staff)
                {% else %}
                    Search Upcoming Flights
                {% endif %}
            </button>
        </form>
      
        <form action="{{ url_for('public.public_search_in_progress') }}" method="GET" style="display:inline-block; margin-left:1rem;">
            <!-- <input type="text" name="q" placeholder="Search flights"> -->
            <button type="submit">Search In-Progress Flights</button>
        </form>
        <div>
            {% if session.get('user_type') %}
                <!-- pick email for customer/agent, username for staff -->
                {% set user_label = session.get('email') or session.get('username') %}
                <span>Logged in as: {{ user_label }}</span>
                &nbsp;|&nbsp;
                <a href="{{ url_for('auth.logout') }}">Logout</a>
            
            {% endif %}
        </div>
    </nav>
    <hr>
</header>

<body>
    <!-- 通用导航栏 -->
    <header>
        <!-- <h1>Air Reservation System</h1> -->
        <nav>
            <!-- 这里以后可以加 Login / Logout / Customer / Agent / Staff 等链接 -->
            <!-- <a href="/">Home</a> -->
        </nav>
        <hr>
    </header>

    <!-- 子页面内容会被插到这里 -->
    <main>
        {% block content %}{% endblock %}
    </main>
</body>
</html>
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul>
      {% for msg in messages %}
        <li>{{ msg }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}