{% extends "base.html" %}

{% block title %}Staff Dashboard{% endblock %}

{% block content %}
  <h2>Staff Dashboard</h2>

  {% if airline_name %}
    <p>Airline: <strong>{{ airline_name }}</strong></p>
  <h3>Analytics</h3>
  <ul>
    <li><a href="{{ url_for('staff.analytics_agents') }}">Top Booking Agents</a></li>
    <li><a href="{{ url_for('staff.analytics_customers') }}">Most Frequent Customers</a></li>
    <li><a href="{{ url_for('staff.analytics_destinations') }}">Top Destinations</a></li>
  </ul>
  {% endif %}

  {% if is_admin %}
    <h3>Admin Controls</h3>
    <ul>
      <li><a href="{{ url_for('admin_staff.add_airport') }}">Add Airport</a></li>
      <li><a href="{{ url_for('admin_staff.add_airplane') }}">Add Airplane</a></li>
      <li><a href="{{ url_for('admin_staff.create_flight') }}">Create Flight</a></li>
      <li><a href="{{ url_for('admin_staff.authorize_agent') }}">Authorize Booking Agent</a></li>
    </ul>
  {% endif %}

  {% if is_operator %}
    <h3>Operator Controls</h3>
    <ul>
      <li><a class="btn btn-warning" href="{{ url_for('operator_staff.update_status') }}">Update Flight Status</a></li>
    </ul>
  {% endif %}

  <h3>Upcoming Flights (next 30 days)</h3>

  {% if flights and flights|length > 0 %}
    <table border="1" cellpadding="6" cellspacing="0">
      <thead>
        <tr>
          <th>Flight</th>
          <th>Departure Airport</th>
          <th>Departure Time</th>
          <th>Arrival Airport</th>
          <th>Arrival Time</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for f in flights %}
          <tr>
            <td>{{ f.airline_name }} {{ f.flight_num }}</td>
            <td>{{ f.departure_airport }}</td>
            <td>{{ f.departure_time }}</td>
            <td>{{ f.arrival_airport }}</td>
            <td>{{ f.arrival_time }}</td>
            <td>{{ f.status }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No upcoming flights found for the next 30 days.</p>
  {% endif %}

{% endblock %}